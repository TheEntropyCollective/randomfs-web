<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RandomFS - P2P Anonymous Filesystem</title>
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Roboto:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
    
    <style>
        /* Modern Font Stack with Retro Title */
        :root {
            --font-primary: 'Orbitron', monospace;
            --font-display: 'Orbitron', monospace;
            --font-body: 'Roboto', -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
            --font-mono: 'JetBrains Mono', 'SF Mono', Monaco, 'Cascadia Code', 'Roboto Mono', monospace;
        }

        /* Accent Color Options - Using the same theme as index.html */
        :root {
            --bg-primary: #ffffff;
            --bg-secondary: #f8fafc;
            --bg-card: rgba(255, 255, 255, 0.85);
            --text-primary: #0f172a;
            --text-secondary: #475569;
            --text-muted: #64748b;
            --border-color: rgba(15, 23, 42, 0.08);
            --accent-primary: #1a1a2e;
            --accent-secondary: #16213e;
            --accent-tertiary: #0f3460;
            --shadow: 0 4px 20px rgba(0, 0, 0, 0.06);
            --shadow-hover: 0 8px 30px rgba(0, 0, 0, 0.1);
            --glow: 0 0 15px rgba(26, 26, 46, 0.08);
        }

        [data-theme="dark"] {
            --bg-primary: #0a0a0a;
            --bg-secondary: #111111;
            --bg-card: rgba(17, 17, 17, 0.7);
            --text-primary: #f8fafc;
            --text-secondary: #cbd5e1;
            --text-muted: #94a3b8;
            --border-color: rgba(245, 158, 11, 0.2);
            --accent-primary: #f59e0b;
            --accent-secondary: #fbbf24;
            --accent-tertiary: #fcd34d;
            --shadow: 0 4px 20px rgba(0, 0, 0, 0.4);
            --shadow-hover: 0 8px 30px rgba(245, 158, 11, 0.25);
            --glow: 0 0 20px rgba(245, 158, 11, 0.2);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: var(--font-body);
            background: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.6;
            overflow-x: hidden;
            transition: background-color 0.3s ease, color 0.3s ease;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 1rem 2rem 2.5rem 2rem;
            position: relative;
            z-index: 1;
        }

        .theme-toggle {
            position: fixed;
            top: 1rem;
            right: 1rem;
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 0.75rem;
            padding: 0.75rem;
            cursor: pointer;
            transition: all 0.15s ease;
            backdrop-filter: blur(20px);
            z-index: 1000;
            box-shadow: var(--shadow);
        }

        .theme-toggle:hover {
            transform: scale(1.01);
            box-shadow: var(--shadow-hover);
            border-color: var(--accent-primary);
        }

        .theme-toggle svg {
            width: 1.25rem;
            height: 1.25rem;
            color: var(--text-primary);
        }
        
        [data-theme="dark"] .theme-toggle .sun-icon {
            color: var(--accent-secondary);
        }

        .controls-container {
            position: fixed;
            top: 1rem;
            right: 1rem;
            display: flex;
            gap: 0.75rem;
            z-index: 1000;
        }

        .hero {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--bg-secondary);
            position: relative;
            overflow: hidden;
        }

        .hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: none !important;
        }

        .hero::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: none !important;
        }

        @keyframes floating {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(2deg); }
        }

        .hero-content {
            text-align: center;
            z-index: 2;
            position: relative;
        }

        .hero h1 {
            font-family: var(--font-display);
            font-size: clamp(2rem, 4vw, 3.2rem);
            font-weight: 700;
            margin-bottom: 1rem;
            background: linear-gradient(135deg, var(--accent-primary) 0%, var(--accent-secondary) 50%, var(--accent-tertiary) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            position: relative;
            letter-spacing: -0.02em;
        }

        .hero p {
            font-family: var(--font-body);
            font-size: 1.25rem;
            color: var(--text-secondary);
            max-width: 600px;
            margin: 0 auto 2rem;
            font-weight: 500;
        }

        .scroll-indicator {
            position: absolute;
            bottom: 2rem;
            left: 50%;
            transform: translateX(-50%);
            color: var(--text-muted);
            animation: bounce 2s infinite;
            text-align: center;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.5rem;
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateX(-50%) translateY(0); }
            40% { transform: translateX(-50%) translateY(-10px); }
            60% { transform: translateX(-50%) translateY(-5px); }
        }

        .section {
            padding: 4rem 0;
            position: relative;
        }

        .section-header {
            text-align: center;
            margin-bottom: 3rem;
        }

        .section-header h2 {
            font-family: var(--font-display);
            font-size: clamp(2rem, 4vw, 3rem);
            font-weight: 700;
            margin-bottom: 1rem;
            color: var(--text-primary);
        }

        .section-header p {
            font-family: var(--font-body);
            font-size: 1.1rem;
            color: var(--text-secondary);
            max-width: 600px;
            margin: 0 auto;
        }

        .process-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 2rem;
            margin-bottom: 3rem;
        }

        .process-card,
        .property-card,
        .scenario-card,
        .comparison-card,
        .step-content,
        .xor-demo,
        .efficiency-demo,
        .retrieval-demo,
        .card {
            background: linear-gradient(145deg, var(--bg-card), rgba(255, 255, 255, 0.95));
            border-radius: 0.75rem;
            border: 1px solid var(--border-color);
            box-shadow: var(--shadow);
            padding: 2rem;
            font-family: var(--font-body);
            color: var(--text-primary);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .process-card:nth-child(1) {
            border-color: rgba(59, 130, 246, 0.2);
            background: linear-gradient(145deg, var(--bg-card), rgba(59, 130, 246, 0.02));
        }
        .process-card:nth-child(1):hover {
            border-color: rgba(59, 130, 246, 0.4);
            box-shadow: 0 8px 30px rgba(59, 130, 246, 0.15);
        }

        .process-card:nth-child(2) {
            border-color: rgba(139, 92, 246, 0.2);
            background: linear-gradient(145deg, var(--bg-card), rgba(139, 92, 246, 0.02));
        }
        .process-card:nth-child(2):hover {
            border-color: rgba(139, 92, 246, 0.4);
            box-shadow: 0 8px 30px rgba(139, 92, 246, 0.15);
        }

        .process-card:nth-child(3) {
            border-color: rgba(245, 158, 11, 0.2);
            background: linear-gradient(145deg, var(--bg-card), rgba(245, 158, 11, 0.02));
        }
        .process-card:nth-child(3):hover {
            border-color: rgba(245, 158, 11, 0.4);
            box-shadow: 0 8px 30px rgba(245, 158, 11, 0.15);
        }

        .process-card:nth-child(4) {
            border-color: rgba(34, 197, 94, 0.2);
            background: linear-gradient(145deg, var(--bg-card), rgba(34, 197, 94, 0.02));
        }
        .process-card:nth-child(4):hover {
            border-color: rgba(34, 197, 94, 0.4);
            box-shadow: 0 8px 30px rgba(34, 197, 94, 0.15);
        }

        .property-card {
            border-color: rgba(34, 197, 94, 0.2);
            background: linear-gradient(145deg, var(--bg-card), rgba(34, 197, 94, 0.05));
        }
        .property-card:hover {
            border-color: rgba(34, 197, 94, 0.4);
            box-shadow: 0 8px 30px rgba(34, 197, 94, 0.15);
        }

        .scenario-card {
            border-color: rgba(59, 130, 246, 0.2);
            background: linear-gradient(145deg, var(--bg-card), rgba(59, 130, 246, 0.05));
        }
        .scenario-card:hover {
            border-color: rgba(59, 130, 246, 0.4);
            box-shadow: 0 8px 30px rgba(59, 130, 246, 0.15);
        }

        .step-content {
            border-color: rgba(139, 92, 246, 0.2);
            background: linear-gradient(145deg, var(--bg-card), rgba(139, 92, 246, 0.05));
        }
        .step-content:hover {
            border-color: rgba(139, 92, 246, 0.4);
            box-shadow: 0 8px 30px rgba(139, 92, 246, 0.15);
        }

        .xor-demo {
            border-color: rgba(245, 158, 11, 0.2);
            background: linear-gradient(145deg, var(--bg-card), rgba(245, 158, 11, 0.05));
        }
        .xor-demo:hover {
            border-color: rgba(245, 158, 11, 0.4);
            box-shadow: 0 8px 30px rgba(245, 158, 11, 0.15);
        }

        .efficiency-demo {
            border-color: rgba(16, 185, 129, 0.2);
            background: linear-gradient(145deg, var(--bg-card), rgba(16, 185, 129, 0.05));
        }
        .efficiency-demo:hover {
            border-color: rgba(16, 185, 129, 0.4);
            box-shadow: 0 8px 30px rgba(16, 185, 129, 0.15);
        }

        .retrieval-demo {
            border-color: rgba(236, 72, 153, 0.2);
            background: linear-gradient(145deg, var(--bg-card), rgba(236, 72, 153, 0.05));
        }
        .retrieval-demo:hover {
            border-color: rgba(236, 72, 153, 0.4);
            box-shadow: 0 8px 30px rgba(236, 72, 153, 0.15);
        }

        [data-theme="dark"] .process-card,
        [data-theme="dark"] .property-card,
        [data-theme="dark"] .scenario-card,
        [data-theme="dark"] .step-content,
        [data-theme="dark"] .xor-demo,
        [data-theme="dark"] .efficiency-demo,
        [data-theme="dark"] .retrieval-demo {
            background: linear-gradient(145deg, var(--bg-card), rgba(245, 158, 11, 0.1));
            border-color: rgba(245, 158, 11, 0.3);
        }

        [data-theme="dark"] .process-card:hover,
        [data-theme="dark"] .property-card:hover,
        [data-theme="dark"] .scenario-card:hover,
        [data-theme="dark"] .comparison-card:hover,
        [data-theme="dark"] .step-content:hover,
        [data-theme="dark"] .xor-demo:hover,
        [data-theme="dark"] .efficiency-demo:hover,
        [data-theme="dark"] .retrieval-demo:hover {
            border-color: rgba(245, 158, 11, 0.5);
            box-shadow: 0 8px 30px rgba(245, 158, 11, 0.25);
        }
        
        [data-theme="dark"] .xor-calculation {
            background: linear-gradient(145deg, var(--bg-card), rgba(255, 200, 100, 0.08));
            border-color: rgba(255, 200, 100, 0.3);
        }

        .process-card::before,
        .process-card::after,
        .property-card::before,
        .property-card::after,
        .scenario-card::before,
        .scenario-card::after,
        .comparison-card::before,
        .comparison-card::after,
        .step-content::before,
        .step-content::after {
            display: none !important;
        }

        .card-title, .property-title, .scenario-title, .system-name, .step-title, .xor-title, .demo-title, .chart-title, .insights-title {
            color: var(--text-primary);
            font-family: var(--font-body);
            font-weight: 700;
        }
        .card-description, .property-description, .scenario-subtitle, .feature-text, .step-description, .xor-title, .demo-title, .chart-title, .insights-title {
            color: var(--text-secondary);
            font-family: var(--font-body);
        }

        .process-card, .property-card, .scenario-card, .step-content, .xor-demo, .efficiency-demo, .retrieval-demo, .card {
            color: var(--text-primary) !important;
        }

        .process-card *, .property-card *, .scenario-card *, .step-content *, .xor-demo *, .efficiency-demo *, .retrieval-demo *, .card * {
            color: inherit;
        }

        .process-card h1, .process-card h2, .process-card h3, .process-card h4, .process-card h5, .process-card h6,
        .property-card h1, .property-card h2, .property-card h3, .property-card h4, .property-card h5, .property-card h6,
        .scenario-card h1, .scenario-card h2, .scenario-card h3, .scenario-card h4, .scenario-card h5, .scenario-card h6,
        .step-content h1, .step-content h2, .step-content h3, .step-content h4, .step-content h5, .step-content h6,
        .xor-demo h1, .xor-demo h2, .xor-demo h3, .xor-demo h4, .xor-demo h5, .xor-demo h6,
        .efficiency-demo h1, .efficiency-demo h2, .efficiency-demo h3, .efficiency-demo h4, .efficiency-demo h5, .efficiency-demo h6,
        .retrieval-demo h1, .retrieval-demo h2, .retrieval-demo h3, .retrieval-demo h4, .retrieval-demo h5, .retrieval-demo h6,
        .card h1, .card h2, .card h3, .card h4, .card h5, .card h6 {
            color: var(--text-primary) !important;
        }

        .process-card p, .property-card p, .scenario-card p, .step-content p, .xor-demo p, .efficiency-demo p, .retrieval-demo p, .card p {
            color: var(--text-secondary) !important;
        }

        .process-card, .property-card, .scenario-card, .comparison-card, .step-content, .xor-demo, .efficiency-demo, .retrieval-demo, .card {
            backdrop-filter: none !important;
        }

        .process-card {
            position: relative;
            overflow: hidden;
        }

        .process-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: linear-gradient(90deg, transparent, rgba(59, 130, 246, 0.6), rgba(139, 92, 246, 0.6), rgba(34, 197, 94, 0.6), transparent);
            transform: scaleX(0);
            transition: transform 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .process-card::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: radial-gradient(600px circle at var(--mouse-x, 50%) var(--mouse-y, 50%), rgba(59, 130, 246, 0.08) 0%, transparent 40%);
            opacity: 0;
            transition: opacity 0.3s ease;
            pointer-events: none;
        }

        .process-card:hover::before {
            transform: scaleX(1);
        }

        .process-card:hover::after {
            opacity: 1;
        }

        .step-number {
            width: 4rem;
            height: 4rem;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 1.5rem;
            font-family: var(--font-mono);
            font-weight: 800;
            font-size: 1.5rem;
            color: #fff;
            box-shadow: var(--shadow);
            position: relative;
            border: 2px solid;
        }

        .process-card:nth-child(1) .step-number {
            background: #3b82f6;
            border-color: rgba(59, 130, 246, 0.3);
        }
        .process-card:nth-child(2) .step-number {
            background: #8b5cf6;
            border-color: rgba(139, 92, 246, 0.3);
        }
        .process-card:nth-child(3) .step-number {
            background: #f59e0b;
            border-color: rgba(245, 158, 11, 0.3);
        }
        .process-card:nth-child(4) .step-number {
            background: #22c55e;
            border-color: rgba(34, 197, 94, 0.3);
        }

        [data-theme="dark"] .process-card:nth-child(1) .step-number,
        [data-theme="dark"] .process-card:nth-child(2) .step-number,
        [data-theme="dark"] .process-card:nth-child(3) .step-number,
        [data-theme="dark"] .process-card:nth-child(4) .step-number {
            background: var(--accent-primary) !important;
            border-color: var(--accent-secondary) !important;
        }

        .card-title {
            font-size: 1.2rem;
            font-weight: 700;
            margin-bottom: 1rem;
            color: var(--text-primary);
        }

        .card-description {
            margin-bottom: 1rem;
            line-height: 1.6;
        }

        .xor-demo {
            margin: 3rem 0;
        }

        .xor-title {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 2rem;
            text-align: center;
            color: var(--text-primary);
        }

        .xor-visual-enhanced {
            padding: 40px;
            margin: 30px 0;
        }

        .anonymization-flow {
            display: grid;
            grid-template-columns: 1fr auto 1fr auto 1fr;
            align-items: center;
            gap: 30px;
            margin-bottom: 40px;
        }

        .flow-step {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .data-block-visual {
            background: linear-gradient(145deg, rgba(15, 23, 42, 0.9), rgba(30, 41, 59, 0.6));
            border: 1px solid rgba(148, 163, 184, 0.15);
            border-radius: 20px;
            padding: 24px 20px;
            width: 200px;
            text-align: center;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .data-block-visual:hover {
            box-shadow: var(--shadow-hover);
        }

        .original-visual, .stored-original, .file-block-mini.original {
            background: var(--bg-card);
            color: var(--text-primary);
            border-color: var(--border-color);
            box-shadow: none;
        }
        .random-visual, .random-storage, .block-mini.random {
            background: var(--bg-secondary);
            color: var(--text-secondary);
            border-color: var(--border-color);
        }
        .result-visual, .reused-storage, .block-mini.recovered {
            background: var(--bg-secondary);
            color: var(--text-secondary);
            border-color: var(--border-color);
        }
        .network-node {
            background: var(--bg-card);
            color: var(--accent-primary);
            border: 2px solid var(--accent-primary);
            box-shadow: 0 4px 20px var(--border-color);
        }
        .network-node.transmitting {
            box-shadow: 0 8px 32px var(--accent-primary);
        }
        .connection-line {
            stroke: var(--border-color);
        }
        .connection-line.active {
            stroke: var(--accent-primary);
        }
        .data-packet, .data-packet.moving {
            fill: var(--accent-primary);
            filter: drop-shadow(0 0 4px var(--accent-primary));
        }
        .hero::before, .hero::after {
            background: none !important;
        }

        .random-blocks-container {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .random-blocks-container .data-block-visual {
            width: 200px;
        }

        .block-header {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            margin-bottom: 15px;
        }

        .block-icon {
            font-size: 1.5rem;
        }

        .block-label {
            font-size: 0.8rem;
            color: var(--text-primary);
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .hex-grid {
            font-family: 'SF Mono', 'Monaco', 'Inconsolata', monospace;
            margin-bottom: 15px;
        }

        .hex-row {
            display: flex;
            justify-content: center;
            gap: 4px;
            margin-bottom: 4px;
        }

        .hex-byte {
            display: inline-block;
            width: 32px;
            height: 32px;
            line-height: 32px;
            text-align: center;
            font-size: 0.85rem;
            border-radius: 8px;
            font-weight: 600;
            position: relative;
        }

        .original-byte {
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.6), rgba(37, 99, 235, 0.5));
            color: #ffffff;
            border: 1px solid rgba(59, 130, 246, 0.6);
            box-shadow: 0 2px 8px rgba(59, 130, 246, 0.3);
        }

        .random-byte {
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.6), rgba(124, 58, 237, 0.5));
            color: #ffffff;
            border: 1px solid rgba(139, 92, 246, 0.6);
            box-shadow: 0 2px 8px rgba(139, 92, 246, 0.3);
        }

        .result-byte {
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.6), rgba(124, 58, 237, 0.5));
            color: #ffffff;
            border: 1px solid rgba(139, 92, 246, 0.6);
            box-shadow: 0 2px 8px rgba(139, 92, 246, 0.3);
        }

        .readable-text {
            font-size: 0.8rem;
            color: var(--text-secondary);
            font-style: italic;
        }

        .flow-arrow {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
        }

        .xor-symbol, .equals-symbol {
            font-size: 1.8rem;
            font-weight: 700;
            color: #94a3b8;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
        }

        .arrow-line {
            display: none;
        }

        .xor-calculation {
            background: linear-gradient(145deg, var(--bg-card), rgba(245, 158, 11, 0.03));
            border-radius: 0.75rem;
            padding: 2rem;
            border: 1px solid rgba(245, 158, 11, 0.2);
            margin-top: 2rem;
        }

        .calculation-example {
            max-width: 400px;
            margin: 0 auto;
            text-align: center;
        }

        .calc-row {
            display: grid;
            grid-template-columns: 80px 50px 120px;
            align-items: center;
            gap: 15px;
            margin-bottom: 8px;
            font-family: 'SF Mono', 'Monaco', 'Inconsolata', monospace;
            justify-content: center;
        }

        @media (max-width: 420px) {
            .calc-row {
                grid-template-columns: 1fr;
                gap: 0.5rem;
                margin-bottom: 1.5rem;
                justify-items: center;
            }
            .calc-label {
                text-align: center;
            }
        }

        .calc-label {
            font-size: 0.9rem;
            color: var(--text-secondary);
            text-align: right;
            justify-self: end;
        }

        .calc-hex {
            text-align: center;
            padding: 5px 8px;
            border-radius: 5px;
            font-weight: 600;
            justify-self: center;
        }

        .calc-binary {
            font-size: 0.8rem;
            color: var(--text-primary);
            letter-spacing: 1px;
            justify-self: start;
        }

        .calc-divider {
            height: 1px;
            background: linear-gradient(90deg, transparent, var(--border-color), transparent);
            margin: 15px 0;
            grid-column: 1 / -1;
        }

        .result-row {
            font-weight: 600;
            padding-top: 5px;
        }

        .properties-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 30px;
            margin-top: 60px;
        }

        .property-card {
            text-align: center;
        }

        .property-icon {
            font-size: 3.5rem;
            margin-bottom: 24px;
            display: block;
            filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.3));
        }

        .property-card:nth-child(1) .property-icon { color: #ef4444; }
        .property-card:nth-child(2) .property-icon { color: #f97316; }
        .property-card:nth-child(3) .property-icon { color: #22c55e; }
        .property-card:nth-child(4) .property-icon { color: #3b82f6; }
        .property-card:nth-child(5) .property-icon { color: #8b5cf6; }
        .property-card:nth-child(6) .property-icon { color: #06b6d4; }

        [data-theme="dark"] .property-card .property-icon {
            color: var(--accent-primary) !important;
        }

        .property-title {
            font-size: 1.2rem;
            font-weight: 700;
            margin-bottom: 1rem;
            color: var(--text-primary);
        }

        .property-description {
            font-size: 0.95rem;
            line-height: 1.6;
        }

        .code-block {
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 0.5rem;
            padding: 1.5rem;
            margin: 2rem 0;
            font-family: var(--font-mono);
            font-size: 0.9rem;
            color: var(--text-primary);
            overflow-x: auto;
        }

        .highlight {
            color: var(--accent-primary);
            font-weight: 600;
        }

        .comparison-container {
            margin: 60px 0;
        }

        .comparison-title {
            text-align: center;
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 40px;
            color: var(--text-primary);
        }

        .comparison-cards {
            display: grid;
            grid-template-columns: 1fr auto 1fr;
            gap: 30px;
            align-items: center;
        }

        .comparison-card {
            margin-bottom: 25px;
            background: linear-gradient(145deg, var(--bg-card), rgba(255, 255, 255, 0.95));
            border-radius: 0.75rem;
            border: 1px solid var(--border-color);
            box-shadow: var(--shadow);
            padding: 2rem;
            font-family: var(--font-body);
            color: var(--text-primary);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .comparison-card.traditional-card {
            border-color: rgba(239, 68, 68, 0.2);
            background: linear-gradient(145deg, var(--bg-card), rgba(239, 68, 68, 0.05));
        }
        .comparison-card.traditional-card:hover {
            border-color: rgba(239, 68, 68, 0.4);
            box-shadow: 0 8px 30px rgba(239, 68, 68, 0.15);
        }

        .comparison-card.offsystem-card {
            border-color: rgba(34, 197, 94, 0.2);
            background: linear-gradient(145deg, var(--bg-card), rgba(34, 197, 94, 0.05));
        }
        .comparison-card.offsystem-card:hover {
            border-color: rgba(34, 197, 94, 0.4);
            box-shadow: 0 8px 30px rgba(34, 197, 94, 0.15);
        }

        [data-theme="dark"] .comparison-card {
            background: linear-gradient(145deg, var(--bg-card), rgba(245, 158, 11, 0.1));
            border-color: rgba(245, 158, 11, 0.3);
        }
        [data-theme="dark"] .comparison-card:hover {
            border-color: rgba(245, 158, 11, 0.5);
            box-shadow: 0 8px 30px rgba(245, 158, 11, 0.25);
        }

        .traditional-card {
            border: 1px solid rgba(239, 68, 68, 0.2);
        }

        .traditional-card:hover {
            transform: translateY(-4px);
            border-color: rgba(239, 68, 68, 0.4);
            box-shadow: 0 20px 40px rgba(239, 68, 68, 0.2);
        }

        .offsystem-card {
            border: 1px solid rgba(34, 197, 94, 0.2);
        }

        .offsystem-card:hover {
            transform: translateY(-4px);
            border-color: rgba(34, 197, 94, 0.4);
            box-shadow: 0 20px 40px rgba(34, 197, 94, 0.2);
        }

        .card-header {
            text-align: center;
            margin-bottom: 24px;
            padding-bottom: 16px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .system-icon {
            font-size: 2.5rem;
            margin-bottom: 12px;
        }

        .system-name {
            font-size: 1.3rem;
            font-weight: 800;
            color: var(--text-primary);
            margin: 0;
        }

        .feature-list {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .feature-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 16px;
            border-radius: 10px;
            transition: all 0.3s ease;
        }

        .feature-item.negative {
            background: rgba(239, 68, 68, 0.1);
            border: 1px solid rgba(239, 68, 68, 0.2);
        }

        .feature-item.negative:hover {
            background: rgba(239, 68, 68, 0.15);
            border-color: rgba(239, 68, 68, 0.3);
        }

        .feature-item.positive {
            background: rgba(34, 197, 94, 0.1);
            border: 1px solid rgba(34, 197, 94, 0.2);
        }

        .feature-item.positive:hover {
            background: rgba(34, 197, 94, 0.15);
            border-color: rgba(34, 197, 94, 0.3);
        }

        .feature-icon {
            font-size: 1.2rem;
            flex-shrink: 0;
        }

        .feature-text {
            font-size: 0.95rem;
            line-height: 1.5;
            color: var(--text-secondary);
        }

        .vs-divider {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: linear-gradient(135deg, #6366f1, #8b5cf6);
            box-shadow: 0 8px 32px rgba(99, 102, 241, 0.4);
            position: relative;
        }

        .vs-divider::before {
            content: '';
            position: absolute;
            top: -4px;
            left: -4px;
            right: -4px;
            bottom: -4px;
            border-radius: 50%;
            background: linear-gradient(135deg, rgba(99, 102, 241, 0.3), rgba(139, 92, 246, 0.3));
            z-index: -1;
            animation: vs-pulse 2s ease-in-out infinite;
        }

        @keyframes vs-pulse {
            0%, 100% { transform: scale(1); opacity: 0.7; }
            50% { transform: scale(1.1); opacity: 1; }
        }

        .vs-text {
            font-size: 1.2rem;
            font-weight: 800;
            color: #ffffff;
        }

        @media (max-width: 1024px) {
            .comparison-cards {
                grid-template-columns: 1fr;
                gap: 20px;
            }

            .vs-divider {
                order: -1;
                margin: 20px auto;
            }

            .network-node {
                width: 60px;
                height: 60px;
                font-size: 0.75rem;
            }
        }

        .retrieval-demo {
            padding: 40px;
            margin: 40px 0;
        }

        .demo-title {
            text-align: center;
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 40px;
            color: var(--text-primary);
        }

        .retrieval-flow {
            display: flex;
            flex-direction: column;
            gap: 40px;
        }

        .retrieval-step {
            display: grid;
            grid-template-columns: 80px 1fr;
            gap: 30px;
            align-items: start;
        }

        .step-indicator {
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
        }

        .step-indicator:not(:last-child)::after {
            content: '';
            position: absolute;
            top: 70px;
            left: 50%;
            transform: translateX(-50%);
            width: 2px;
            height: 100%;
            background: var(--border-color);
            z-index: -1;
        }

        .step-number-large {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--accent-secondary), var(--accent-primary));
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            font-weight: 700;
            color: #fff;
            box-shadow: 0 4px 20px var(--shadow);
            border: 2px solid;
        }

        .retrieval-step:nth-child(1) .step-number-large { background: #3b82f6; border-color: rgba(59, 130, 246, 0.3); }
        .retrieval-step:nth-child(2) .step-number-large { background: #8b5cf6; border-color: rgba(139, 92, 246, 0.3); }
        .retrieval-step:nth-child(3) .step-number-large { background: #f59e0b; border-color: rgba(245, 158, 11, 0.3); }
        .retrieval-step:nth-child(4) .step-number-large { background: #22c55e; border-color: rgba(34, 197, 94, 0.3); }
        
        [data-theme="dark"] .retrieval-step .step-number-large {
            background: var(--accent-primary) !important;
            border-color: var(--accent-secondary) !important;
            color: var(--text-primary);
        }

        .step-content {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 20px;
            padding: 32px;
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .retrieval-step:nth-child(1) .step-content { border-color: rgba(59, 130, 246, 0.2); background: linear-gradient(145deg, var(--bg-card), rgba(59, 130, 246, 0.02)); }
        .retrieval-step:nth-child(1) .step-content:hover { border-color: rgba(59, 130, 246, 0.4); box-shadow: 0 8px 30px rgba(59, 130, 246, 0.15); }
        .retrieval-step:nth-child(2) .step-content { border-color: rgba(139, 92, 246, 0.2); background: linear-gradient(145deg, var(--bg-card), rgba(139, 92, 246, 0.02)); }
        .retrieval-step:nth-child(2) .step-content:hover { border-color: rgba(139, 92, 246, 0.4); box-shadow: 0 8px 30px rgba(139, 92, 246, 0.15); }
        .retrieval-step:nth-child(3) .step-content { border-color: rgba(245, 158, 11, 0.2); background: linear-gradient(145deg, var(--bg-card), rgba(245, 158, 11, 0.02)); }
        .retrieval-step:nth-child(3) .step-content:hover { border-color: rgba(245, 158, 11, 0.4); box-shadow: 0 8px 30px rgba(245, 158, 11, 0.15); }
        .retrieval-step:nth-child(4) .step-content { border-color: rgba(34, 197, 94, 0.2); background: linear-gradient(145deg, var(--bg-card), rgba(34, 197, 94, 0.02)); }
        .retrieval-step:nth-child(4) .step-content:hover { border-color: rgba(34, 197, 94, 0.4); box-shadow: 0 8px 30px rgba(34, 197, 94, 0.15); }

        .step-content::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.05) 0%, transparent 50%);
            opacity: 0;
            transition: opacity 0.3s ease;
            padding: 24px;
            margin: 24px 0;
        }

        .step-content:hover::before {
            opacity: 1;
        }

        .descriptor-visual {
            background: linear-gradient(145deg, rgba(0, 0, 0, 0.6), rgba(15, 23, 42, 0.4));
            border: 1px solid rgba(148, 163, 184, 0.1);
            border-radius: 16px;
            padding: 24px;
            margin: 24px 0;
        }

        .request-item {
            display: grid;
            grid-template-columns: 48px 1fr 48px;
            gap: 16px;
            align-items: center;
            padding: 16px;
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            margin-bottom: 12px;
            transition: all 0.3s ease;
        }

        .request-item:hover {
            border-color: var(--accent-primary);
            transform: translateX(4px);
        }

        .ipfs-hash {
            background: linear-gradient(135deg, rgba(34, 197, 94, 0.1), rgba(22, 163, 74, 0.05));
            color: #166534;
            padding: 8px 12px;
            border-radius: 8px;
            font-size: 0.8rem;
            border: 1px solid rgba(34, 197, 94, 0.2);
            font-family: var(--font-mono);
            font-weight: 600;
            line-height: 1;
            display: inline-block;
        }
        
        [data-theme="dark"] .ipfs-hash {
            background: linear-gradient(135deg, rgba(34, 197, 94, 0.3), rgba(22, 163, 74, 0.2));
            color: #86efac;
            border: 1px solid rgba(34, 197, 94, 0.3);
        }

        .ipfs-hash.stored-hash {
            background: linear-gradient(135deg, rgba(34, 197, 94, 0.3), rgba(22, 163, 74, 0.2));
            color: #86efac;
            padding: 8px 12px;
            border-radius: 8px;
            font-size: 0.8rem;
            border: 1px solid rgba(34, 197, 94, 0.2);
            font-family: var(--font-mono);
            font-weight: 600;
            line-height: 1;
            display: inline-block;
        }

        .step-title {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 20px;
            color: var(--text-primary);
        }

        .step-description {
            color: var(--text-secondary);
            font-size: 0.95rem;
            margin-top: 20px;
            line-height: 1.6;
        }

        .descriptor-visual {
            background: var(--bg-secondary);
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            border: 1px solid var(--border-color);
        }

        .descriptor-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--border-color);
        }

        .file-icon {
            font-size: 2rem;
            color: var(--accent-primary);
        }

        .filename {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--text-primary);
        }

        .file-meta {
            font-size: 0.8rem;
            color: var(--text-muted);
        }

        .descriptor-entry {
            display: flex;
            gap: 15px;
            margin-bottom: 10px;
            font-family: var(--font-mono);
            font-size: 0.8rem;
        }

        .block-id {
            color: var(--text-secondary);
            min-width: 70px;
        }

        .hash-list {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .ipfs-hash {
            background: var(--bg-card);
            color: var(--text-secondary);
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 0.7rem;
            border: 1px solid var(--border-color);
        }

        .more-indicator {
            color: var(--text-muted);
            font-style: italic;
            text-align: center;
            margin-top: 10px;
        }

        .fetch-visual {
            background: var(--bg-secondary);
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            border: 1px solid var(--border-color);
        }

        .request-item {
            display: grid;
            grid-template-columns: 40px 1fr 40px;
            gap: 15px;
            align-items: center;
            padding: 12px;
            background: var(--bg-card);
            border-radius: 8px;
            margin-bottom: 8px;
            border: 1px solid var(--border-color);
        }

        .request-icon {
            font-size: 1.2rem;
            text-align: center;
            color: var(--accent-primary);
        }

        .request-hash {
            font-family: var(--font-mono);
            font-size: 0.8rem;
            color: var(--text-secondary);
        }

        .request-data {
            font-family: var(--font-mono);
            font-size: 0.7rem;
            color: var(--text-muted);
        }

        .request-status {
            text-align: center;
            font-size: 1.2rem;
            color: #22c55e;
        }

        .derandomization-visual {
            background: var(--bg-secondary);
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            border: 1px solid var(--border-color);
        }

        .xor-reconstruction {
            margin-bottom: 20px;
        }

        .reconstruction-row {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
        }

        .block-container {
            flex-shrink: 0;
        }

        .block-mini {
            width: 80px;
            padding: 8px;
            border-radius: 8px;
            text-align: center;
            border: 1px solid;
        }

        .block-mini.randomized {
            background: var(--bg-card);
            border-color: var(--border-color);
        }

        .block-mini.random {
            background: var(--bg-card);
            border-color: var(--border-color);
        }

        .block-mini.original {
            background: var(--bg-card);
            border-color: var(--border-color);
        }

        .block-label-mini {
            font-size: 0.6rem;
            color: var(--text-muted);
            margin-bottom: 4px;
        }

        .hex-mini {
            font-family: var(--font-mono);
            font-size: 0.7rem;
            color: var(--text-primary);
        }

        .xor-symbol-mini, .equals-symbol-mini {
            font-size: 1.2rem;
            color: var(--text-primary);
            font-weight: bold;
        }

        .reconstruction-progress {
            background: var(--bg-secondary);
            border-radius: 8px;
            padding: 15px;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: var(--bg-card);
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 8px;
        }

        .progress-fill {
            width: 60%;
            height: 100%;
            background: linear-gradient(90deg, #3b82f6, #22c55e);
            border-radius: 4px;
            animation: progress-pulse 2s ease-in-out infinite;
        }

        @keyframes progress-pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 1; }
        }

        .progress-text {
            font-size: 0.8rem;
            color: var(--text-secondary);
            text-align: center;
            background: var(--bg-secondary);
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }

        .assembly-visual {
            background: var(--bg-secondary);
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            text-align: center;
            border: 1px solid var(--border-color);
        }

        .file-blocks {
            margin-bottom: 20px;
        }

        .block-row {
            display: flex;
            justify-content: center;
            gap: 8px;
            margin-bottom: 8px;
        }

        .file-block-mini {
            width: 80px;
            padding: 8px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.7rem;
            font-weight: 600;
            border: 1px solid;
            background: var(--bg-card);
        }

        .file-block-mini.recovered {
            background: rgba(34, 197, 94, 0.1);
            border-color: rgba(34, 197, 94, 0.4);
            color: var(--text-primary);
        }

        .file-block-mini.loading,
        .file-block-mini.pending {
            background: var(--bg-card);
            color: var(--text-muted);
            border: 1px dashed var(--border-color);
        }

        @keyframes loading-pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 1; }
        }

        .assembly-arrow {
            font-size: 2rem;
            color: var(--accent-primary);
            margin: 20px 0;
        }

        .file-preview {
            background: rgba(59, 130, 246, 0.1);
            border: 2px solid rgba(59, 130, 246, 0.4);
            border-radius: 12px;
            padding: 20px;
            display: flex;
            align-items: center;
            gap: 15px;
            flex-direction: column;
            text-align: center;
            justify-content: center;
        }

        .file-icon-large {
            font-size: 3rem;
            color: var(--text-primary);
        }

        .file-details {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .final-filename {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--accent-primary);
        }

        .final-size {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .integrity-check {
            color: #16a34a;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .key-insights {
            background: var(--bg-secondary);
            border-radius: 15px;
            padding: 30px;
        }

        .insights-title {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 25px;
            text-align: center;
            color: #16a34a;
        }

        .insights-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }
        @media (min-width: 768px) {
            .insights-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        @media (min-width: 1200px) {
            .insights-grid {
                grid-template-columns: repeat(4, 1fr);
            }
        }

        .insight-item {
            display: flex;
            gap: 12px;
            align-items: flex-start;
            padding: 15px;
            background: var(--bg-card);
            border-radius: 10px;
            border: 1px solid var(--border-color);
        }

        .insight-icon {
            font-size: 1.5rem;
            flex-shrink: 0;
            color: var(--accent-primary);
        }

        .insight-text {
            font-size: 0.9rem;
            line-height: 1.5;
            color: var(--text-secondary);
        }

        .insight-text strong {
            color: var(--accent-primary);
        }

        @media (max-width: 1024px) {
            .retrieval-step {
                grid-template-columns: 1fr;
                gap: 20px;
            }

            .step-indicator::after {
                display: none;
            }

            .reconstruction-row {
                flex-direction: column;
                gap: 10px;
            }

            .xor-symbol-mini, .equals-symbol-mini {
                transform: rotate(90deg);
            }

            .block-row {
                flex-wrap: wrap;
            }

            .file-preview {
                flex-direction: column;
                text-align: center;
            }
        }

        .network-viz-container {
            background: var(--bg-card);
            border-radius: 1rem;
            border: 1px solid var(--border-color);
            box-shadow: var(--shadow);
            padding: 2rem;
            margin: 3rem 0;
        }

        .network-viz-header {
            text-align: center;
            margin-bottom: 2rem;
        }

        .network-viz-header h3 {
            font-size: 1.3rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 0.5rem;
        }

        .network-viz-header p {
            color: var(--text-secondary);
            font-size: 0.95rem;
        }

        .network-viz {
            position: relative;
            height: 450px;
            width: 100%;
        }

        .node {
            position: absolute;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 10;
        }

        .node-icon {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
            position: relative;
            z-index: 2;
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            transition: all 0.3s ease;
        }

        .central-node .node-icon {
            width: 80px;
            height: 80px;
            font-size: 2.5rem;
        }
        
        .node-glow {
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            /* background is set by JS */
            z-index: 1;
            transform: scale(1.15);
            opacity: 0.6;
            filter: blur(10px);
            transition: background-color 0.3s ease;
        }

        .connections-svg {
            position: absolute;
            top: 0;
            left: 0;
            overflow: visible;
        }

        .connection-line {
            stroke: var(--border-color);
            stroke-width: 1.5;
            fill: none;
        }

        .data-packet {
            /* fill is now set by JS */
            filter: url(#glow-filter);
        }
        
        .p2p-packet {
            /* fill is now set by JS */
            filter: url(#glow-filter);
            opacity: 0.7;
        }
        
        .network-viz-legend {
            display: flex;
            justify-content: center;
            gap: 2rem;
            flex-wrap: wrap;
            margin-top: 2rem;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.85rem;
            color: var(--text-secondary);
        }

        .legend-icon {
            font-size: 1rem;
        }
        
        .packet-legend {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: var(--accent-primary);
            display: inline-block;
        }

        .ipfs-benefits-panel {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-top: 3rem;
        }

        .benefit-item {
            background: var(--bg-card);
            border-radius: 0.75rem;
            border: 1px solid var(--border-color);
            padding: 1.5rem;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .benefit-item:hover {
            border-color: var(--accent-primary);
            transform: translateY(-2px);
            box-shadow: var(--shadow-hover);
        }

        .benefit-header {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            margin-bottom: 0.75rem;
        }

        .benefit-icon {
            font-size: 1.5rem;
        }

        .benefit-item h3 {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--text-primary);
            margin: 0;
        }

        .benefit-item p {
            color: var(--text-secondary);
            line-height: 1.5;
            margin: 0;
            font-size: 0.9rem;
        }

        @media (max-width: 768px) {
            .ipfs-benefits-panel {
                grid-template-columns: 1fr;
                gap: 1rem;
            }
        }
        .node .node-icon {
            border-width: 1px !important;
        }

        [data-theme="dark"] .ipfs-hash.random-hash {
            background: linear-gradient(135deg, #8b5cf6, #7c3aed);
        }

        .labeled-hash { text-align: center; display: flex; flex-direction: column; align-items: center; gap: 0.25rem; }
        .hash-label {
            font-size: 0.7rem;
            color: var(--text-muted);
            font-family: var(--font-body);
        }

        .text-original-data { color: #3b82f6; }
        .text-random-data { color: #8b5cf6; }
    </style>
</head>
<body>
    <section class="hero">
        <div class="container">
            <div class="controls-container">
                <button class="theme-toggle" id="themeToggle" title="Toggle theme">
                    <svg class="sun-icon" viewBox="0 0 24 24" style="display: none;" fill="currentColor" stroke="currentColor">
                        <circle cx="12" cy="12" r="5" fill="currentColor"/>
                        <line x1="12" y1="1" x2="12" y2="3" stroke="currentColor" stroke-width="2"/>
                        <line x1="12" y1="21" x2="12" y2="23" stroke="currentColor" stroke-width="2"/>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64" stroke="currentColor" stroke-width="2"/>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78" stroke="currentColor" stroke-width="2"/>
                        <line x1="1" y1="12" x2="3" y2="12" stroke="currentColor" stroke-width="2"/>
                        <line x1="21" y1="12" x2="23" y2="12" stroke="currentColor" stroke-width="2"/>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36" stroke="currentColor" stroke-width="2"/>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22" stroke="currentColor" stroke-width="2"/>
                    </svg>
                    <svg class="moon-icon" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z" fill="currentColor"/>
                    </svg>
                </button>
            </div>
            <div class="hero-content">
                <h1>RandomFS</h1>
                <p>Anonymous P2P filesystem combining OFFSystem's data anonymization with IPFS distributed storage</p>
            </div>
        </div>
        <div class="scroll-indicator">
            <div style="font-size: 1.5rem;"></div>
            <div style="font-size: 0.8rem; margin-top: 5px;">Scroll to explore</div>
        </div>
    </section>

    <section class="section">
        <div class="container">
            <div class="section-header">
                <h2>How RandomFS Works</h2>
                <p>A revolutionary approach that anonymizes data blocks rather than network connections</p>
            </div>

            <div class="process-grid">
                <div class="process-card">
                    <div class="step-number">1</div>
                    <h3 class="card-title">File Splitting</h3>
                    <p class="card-description">
                        Files are divided into 128 KiB blocks, padded with random data if necessary. 
                        This standardization ensures uniform block sizes across the network.
                    </p>
                </div>

                <div class="process-card">
                    <div class="step-number">2</div>
                    <h3 class="card-title">XOR Randomization</h3>
                    <p class="card-description">
                        Each file block is XORed with randomly selected blocks from the cache, 
                        creating blocks that appear completely random and untraceable.
                    </p>
                </div>

                <div class="process-card">
                    <div class="step-number">3</div>
                    <h3 class="card-title">IPFS Distribution</h3>
                    <p class="card-description">
                        Randomized blocks are stored across the IPFS network using content addressing,
                        ensuring redundancy and availability without revealing content.
                    </p>
                </div>

                <div class="process-card">
                    <div class="step-number">4</div>
                    <h3 class="card-title">Descriptor Creation</h3>
                    <p class="card-description">
                        A descriptor containing reconstruction information is created, mapping which 
                        random blocks are needed to rebuild each original file block.
                    </p>
                </div>
            </div>
        </div>
    </section>

    <section class="section">
        <div class="container">
            <div class="section-header">
                <h2>XOR Randomization Process</h2>
                <p>How data blocks become indistinguishable from random noise</p>
            </div>

            <div class="xor-demo">
                <h3 class="xor-title">Block Anonymization Example</h3>
                <div style="text-align: center; margin-bottom: 2rem; padding: 1rem; background: var(--bg-secondary); border-radius: 0.5rem; border: 1px solid var(--border-color);">
                    <p style="color: var(--text-secondary); font-size: 0.9rem; margin: 0;">
                        <strong>Color Guide:</strong> 
                        <span style="color: #93c5fd;">Blue</span> = Original data  
                        <span style="color: #c4b5fd;">Purple</span> = Random/Anonymized data
                    </p>
                </div>
                
                <div class="xor-visual-enhanced">
                    <div class="anonymization-flow">
                        <!-- Original File Block -->
                        <div class="flow-step">
                            <div class="data-block-visual original-visual">
                                <div class="block-header">
                                    <div class="block-icon"></div>
                                    <div class="block-label">Original Block</div>
                                </div>
                                <div class="hex-grid">
                                    <div class="hex-row">
                                        <span class="hex-byte original-byte">48</span>
                                        <span class="hex-byte original-byte">65</span>
                                        <span class="hex-byte original-byte">6c</span>
                                        <span class="hex-byte original-byte">6c</span>
                                        <span class="hex-byte original-byte">6f</span>
                                        <span class="hex-byte original-byte">20</span>
                                    </div>
                                    <div class="hex-row">
                                        <span class="hex-byte original-byte">57</span>
                                        <span class="hex-byte original-byte">6f</span>
                                        <span class="hex-byte original-byte">72</span>
                                        <span class="hex-byte original-byte">6c</span>
                                        <span class="hex-byte original-byte">64</span>
                                        <span class="hex-byte original-byte">21</span>
                                    </div>
                                </div>
                                <div class="readable-text">"Hello World!"</div>
                            </div>
                        </div>

                        <!-- XOR Arrow -->
                        <div class="flow-arrow">
                            <div class="xor-symbol"></div>
                            <div class="arrow-line"></div>
                        </div>

                        <!-- Random Blocks -->
                        <div class="flow-step">
                            <div class="random-blocks-container">
                                <div class="data-block-visual random-visual">
                                    <div class="block-header">
                                        <div class="block-icon"></div>
                                        <div class="block-label">Random Block 1</div>
                                    </div>
                                    <div class="hex-grid">
                                        <div class="hex-row">
                                            <span class="hex-byte random-byte">a3</span>
                                            <span class="hex-byte random-byte">f7</span>
                                            <span class="hex-byte random-byte">b2</span>
                                            <span class="hex-byte random-byte">c8</span>
                                            <span class="hex-byte random-byte">d4</span>
                                            <span class="hex-byte random-byte">e9</span>
                                        </div>
                                        <div class="hex-row">
                                            <span class="hex-byte random-byte">f1</span>
                                            <span class="hex-byte random-byte">a6</span>
                                            <span class="hex-byte random-byte">b7</span>
                                            <span class="hex-byte random-byte">c2</span>
                                            <span class="hex-byte random-byte">d8</span>
                                            <span class="hex-byte random-byte">e3</span>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="data-block-visual random-visual">
                                    <div class="block-header">
                                        <div class="block-icon"></div>
                                        <div class="block-label">Random Block 2</div>
                                    </div>
                                    <div class="hex-grid">
                                        <div class="hex-row">
                                            <span class="hex-byte random-byte">2d</span>
                                            <span class="hex-byte random-byte">8a</span>
                                            <span class="hex-byte random-byte">44</span>
                                            <span class="hex-byte random-byte">19</span>
                                            <span class="hex-byte random-byte">7e</span>
                                            <span class="hex-byte random-byte">bb</span>
                                        </div>
                                        <div class="hex-row">
                                            <span class="hex-byte random-byte">55</span>
                                            <span class="hex-byte random-byte">cc</span>
                                            <span class="hex-byte random-byte">91</span>
                                            <span class="hex-byte random-byte">34</span>
                                            <span class="hex-byte random-byte">a7</span>
                                            <span class="hex-byte random-byte">6f</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Equals Arrow -->
                        <div class="flow-arrow">
                            <div class="equals-symbol">=</div>
                            <div class="arrow-line"></div>
                        </div>

                        <!-- Result Block -->
                        <div class="flow-step">
                            <div class="data-block-visual result-visual">
                                <div class="block-header">
                                    <div class="block-icon"></div>
                                    <div class="block-label">Anonymized Block</div>
                                </div>
                                <div class="hex-grid">
                                    <div class="hex-row">
                                        <span class="hex-byte result-byte">c6</span>
                                        <span class="hex-byte result-byte">18</span>
                                        <span class="hex-byte result-byte">9a</span>
                                        <span class="hex-byte result-byte">bd</span>
                                        <span class="hex-byte result-byte">c5</span>
                                        <span class="hex-byte result-byte">72</span>
                                    </div>
                                    <div class="hex-row">
                                        <span class="hex-byte result-byte">f3</span>
                                        <span class="hex-byte result-byte">05</span>
                                        <span class="hex-byte result-byte">54</span>
                                        <span class="hex-byte result-byte">9a</span>
                                        <span class="hex-byte result-byte">1b</span>
                                        <span class="hex-byte result-byte">ad</span>
                                    </div>
                                </div>
                                <div class="readable-text">Looks like random noise</div>
                            </div>
                        </div>
                    </div>

                    <!-- Visual XOR Calculation -->
                    <div class="xor-calculation">
                        <h4 style="margin-bottom: 20px; color: var(--text-primary); font-weight: 600;">Byte-by-Byte XOR Operation</h4>
                        <div class="calculation-example" style="text-align: left;">
                            <div class="calc-row">
                                <span class="calc-label">Original:</span>
                                <span class="calc-hex original-byte">48</span>
                                <span class="calc-binary">01001000</span>
                            </div>
                            <div class="calc-row">
                                <span class="calc-label">Random 1:</span>
                                <span class="calc-hex random-byte">a3</span>
                                <span class="calc-binary">10100011</span>
                            </div>
                            <div class="calc-row">
                                <span class="calc-label">Random 2:</span>
                                <span class="calc-hex random-byte">2d</span>
                                <span class="calc-binary">00101101</span>
                            </div>
                            <div class="calc-divider"></div>
                            <div class="calc-row result-row">
                                <span class="calc-label">Result:</span>
                                <span class="calc-hex result-byte">c6</span>
                                <span class="calc-binary">11000110</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="code-block">
<span class="highlight">function</span> anonymizeBlock(originalBlock, randomBlocks) {
    <span class="highlight">let</span> result = originalBlock;
    
    <span class="highlight">for</span> (<span class="highlight">let</span> randomBlock <span class="highlight">of</span> randomBlocks) {
        result = <span class="highlight">xor</span>(result, randomBlock);
    }
    
    <span class="highlight">return</span> {
        anonymizedBlock: result,
        descriptor: randomBlocks.map(block => block.hash)
    };
}

<span class="highlight">// Reconstruction is the reverse process</span>
<span class="highlight">function</span> reconstructBlock(anonymizedBlock, randomBlocks) {
    <span class="highlight">let</span> result = anonymizedBlock;
    
    <span class="highlight">for</span> (<span class="highlight">let</span> randomBlock <span class="highlight">of</span> randomBlocks) {
        result = <span class="highlight">xor</span>(result, randomBlock);
    }
    
    <span class="highlight">return</span> result; <span class="highlight">// Original block recovered</span>
}
                </div>

                <p style="color: #b0b0b0; text-align: center; margin-top: 20px;">
                    <strong>Key Insight:</strong> XOR operations are reversible. The same random blocks used for anonymization 
                    can be used to perfectly reconstruct the original data.
                </p>
            </div>
        </div>
    </section>

    <section class="section">
        <div class="container">
            <div class="section-header">
                <h2>Why IPFS + RandomFS?</h2>
                <p>How distributed storage enhances privacy and reliability</p>
            </div>

            <div class="network-viz-container">
                <div class="network-viz-header">
                    <h3>Decentralized & Anonymous</h3>
                    <p>Randomized blocks are fetched from multiple IPFS peers simultaneously.</p>
                </div>
                <div class="network-viz">
                    <!-- Central User Node -->
                    <div class="node central-node" id="central-node">
                        <div class="node-icon"></div>
                        <div class="node-glow"></div>
                    </div>
            
                    <!-- IPFS Peer Nodes -->
                    <div class="node peer-node" id="peer-node-1">
                        <div class="node-icon"></div>
                        <div class="node-glow"></div>
                    </div>
                    <div class="node peer-node" id="peer-node-2">
                        <div class="node-icon"></div>
                        <div class="node-glow"></div>
                    </div>
                    <div class="node peer-node" id="peer-node-3">
                        <div class="node-icon"></div>
                        <div class="node-glow"></div>
                    </div>
                    <div class="node peer-node" id="peer-node-4">
                        <div class="node-icon"></div>
                        <div class="node-glow"></div>
                    </div>
                    <div class="node peer-node" id="peer-node-5">
                        <div class="node-icon"></div>
                        <div class="node-glow"></div>
                    </div>
                    <div class="node peer-node" id="peer-node-6">
                        <div class="node-icon"></div>
                        <div class="node-glow"></div>
                    </div>

                    <!-- SVG for connections and packets -->
                    <svg class="connections-svg" width="100%" height="100%">
                        <defs>
                            <linearGradient id="packet-gradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" stop-color="var(--accent-tertiary)" />
                                <stop offset="100%" stop-color="var(--accent-primary)" />
                            </linearGradient>
                            <filter id="glow-filter" x="-50%" y="-50%" width="200%" height="200%">
                                <feGaussianBlur stdDeviation="4" result="coloredBlur"/>
                                <feMerge>
                                    <feMergeNode in="coloredBlur"/>
                                    <feMergeNode in="SourceGraphic"/>
                                </feMerge>
                            </filter>
                        </defs>
                </svg>
                </div>
                <div class="network-viz-legend">
                    <div class="legend-item"><span class="legend-icon" style="color: var(--text-primary);"></span> Your Device</div>
                    <div class="legend-item"><span class="legend-icon" style="color: var(--accent-primary);"></span> IPFS Peer</div>
                    <div class="legend-item"><span class="packet-legend"></span>&nbsp;Data Block</div>
                </div>
            </div>

            <div class="ipfs-benefits-panel">
                <div class="benefit-item" data-benefit="distribution">
                    <div class="benefit-header">
                        <span class="benefit-icon"></span>
                        <h3>Global Distribution</h3>
                    </div>
                    <p>Your randomized blocks are automatically distributed across thousands of IPFS nodes worldwide. No single location or jurisdiction controls your data.</p>
                </div>
                
                <div class="benefit-item" data-benefit="privacy">
                    <div class="benefit-header">
                        <span class="benefit-icon"></span>
                        <h3>Content Privacy</h3>
                    </div>
                    <p>Each block has a unique hash, but the content is random noise. Even if someone knows the hash, they can't determine what the original file was.</p>
                </div>

                <div class="benefit-item" data-benefit="redundancy">
                    <div class="benefit-header">
                        <span class="benefit-icon"></span>
                        <h3>Automatic Redundancy</h3>
                </div>
                    <p>IPFS automatically replicates your blocks across multiple nodes. If some nodes go offline, your data remains accessible from others.</p>
            </div>

                <div class="benefit-item" data-benefit="speed">
                    <div class="benefit-header">
                        <span class="benefit-icon"></span>
                        <h3>Faster Retrieval</h3>
                    </div>
                    <p>Blocks are fetched from the nearest available node, not from a central server. This makes downloads faster and more reliable.</p>
                </div>
            </div>

            <div class="comparison-container">
                <h4 class="comparison-title">System Comparison</h4>
                <div class="comparison-cards">
                    <div class="comparison-card traditional-card">
                        <div class="card-header">
                            <div class="system-icon"></div>
                            <h5 class="system-name">Traditional P2P</h5>
                        </div>
                        <div class="feature-list">
                            <div class="feature-item negative">
                                <span class="feature-icon"></span>
                                <span class="feature-text">Files stored as-is, identity traceable</span>
                            </div>
                            <div class="feature-item negative">
                                <span class="feature-icon"></span>
                                <span class="feature-text">Requires onion routing for anonymity</span>
                            </div>
                            <div class="feature-item negative">
                                <span class="feature-icon"></span>
                                <span class="feature-text">5-15x bandwidth overhead (500-1400%)</span>
                            </div>
                            <div class="feature-item negative">
                                <span class="feature-icon"></span>
                                <span class="feature-text">Storing files on behalf of other users creates legal risks</span>
                            </div>
                            <div class="feature-item negative">
                                <span class="feature-icon"></span>
                                <span class="feature-text">Every download requires full routing</span>
                            </div>
                        </div>
                    </div>

                    <div class="vs-divider">
                        <div class="vs-text">VS</div>
                    </div>

                    <div class="comparison-card offsystem-card">
                        <div class="card-header">
                            <div class="system-icon"></div>
                            <h5 class="system-name">RandomFS</h5>
                        </div>
                        <div class="feature-list">
                            <div class="feature-item positive">
                                <span class="feature-icon"></span>
                                <span class="feature-text">Only randomized blocks stored, untraceable</span>
                            </div>
                            <div class="feature-item positive">
                                <span class="feature-icon"></span>
                                <span class="feature-text">Data-level anonymity, no routing overhead</span>
                            </div>
                            <div class="feature-item positive">
                                <span class="feature-icon"></span>
                                <span class="feature-text">~1.5-2x storage overhead with block reuse</span>
                            </div>
                            <div class="feature-item positive">
                                <span class="feature-icon"></span>
                                <span class="feature-text">Individual blocks are non-copyrightable random data</span>
                            </div>
                            <div class="feature-item positive">
                                <span class="feature-icon"></span>
                                <span class="feature-text">Block reuse improves efficiency over time</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section class="section">
        <div class="container">
            <div class="section-header">
                <h2>File Retrieval & De-randomization</h2>
                <p>How users reconstruct original files from anonymized blocks</p>
            </div>

            <div class="retrieval-demo">
                <h3 class="demo-title">Step-by-Step File Recovery Process</h3>
                
                <div class="retrieval-flow">
                    <!-- Step 1: Descriptor -->
                    <div class="retrieval-step">
                        <div class="step-indicator">
                            <div class="step-number-large">1</div>
                        </div>
                        <div class="step-content">
                            <h4 class="step-title"> Access Descriptor</h4>
                            <p class="step-description" style="margin-bottom: 1.5rem;">
                                User receives a descriptor containing IPFS hashes for each randomized block. 
                                This is the only piece of information linking random blocks to the original file.
                            </p>
                            <div class="descriptor-visual">
                                <div class="descriptor-header">
                                    <div class="file-icon"></div>
                                    <div class="file-info">
                                        <div class="filename">vacation_photos.zip</div>
                                        <div class="file-meta">2.5 MB  20 blocks  Tuple size: 3</div>
                                    </div>
                                </div>
                                <div class="descriptor-content">
                                    <div class="descriptor-entry">
                                        <span class="block-id">Block 1:</span>
                                        <span class="hash-list">
                                            <div class="labeled-hash">
                                                <div class="hash-label">Anonymized Block</div>
                                                <span class="ipfs-hash stored-hash">Qm7x9K...</span>
                                            </div>
                                            <div class="labeled-hash">
                                                <div class="hash-label">Random Block</div>
                                                <span class="ipfs-hash random-hash">QmR3mF...</span>
                                            </div>
                                            <div class="labeled-hash">
                                                <div class="hash-label">Random Block</div>
                                                <span class="ipfs-hash random-hash">QmB8tL...</span>
                                            </div>
                                        </span>
                                    </div>
                                    <div class="descriptor-entry">
                                        <span class="block-id">Block 2:</span>
                                        <span class="hash-list">
                                            <div class="labeled-hash">
                                                <div class="hash-label">Anonymized Block</div>
                                                <span class="ipfs-hash stored-hash">QmN5wP...</span>
                                            </div>
                                            <div class="labeled-hash">
                                                <div class="hash-label">Random Block</div>
                                                <span class="ipfs-hash random-hash">QmX2dH...</span>
                                            </div>
                                            <div class="labeled-hash">
                                                <div class="hash-label">Random Block</div>
                                                <span class="ipfs-hash random-hash">QmJ4rT...</span>
                                            </div>
                                        </span>
                                    </div>
                                    <div class="more-indicator">... +18 more blocks</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Step 2: Fetch Blocks -->
                    <div class="retrieval-step">
                        <div class="step-indicator">
                            <div class="step-number-large">2</div>
                        </div>
                        <div class="step-content">
                            <h4 class="step-title"> Fetch Randomized Blocks</h4>
                            <p class="step-description" style="margin-bottom: 1.5rem;">
                                Client fetches randomized blocks from IPFS network using content hashes. 
                                Each block appears as random data to network observers.
                            </p>
                            <div class="fetch-visual">
                                <div class="ipfs-requests">
                                    <div class="request-item">
                                        <div class="request-icon"></div>
                                        <div class="request-info">
                                            <div class="request-hash">IPFS GET Qmc618...</div>
                                            <div class="request-data">c6189abdC572f3054.9a1bad...</div>
                                        </div>
                                        <div class="request-status"></div>
                                    </div>
                                    <div class="request-item">
                                        <div class="request-icon"></div>
                                        <div class="request-info">
                                            <div class="request-hash">IPFS GET QmR3mF8tL...</div>
                                            <div class="request-data">a3f7b2c8d4e9f1a6b7c2d8e3...</div>
                                        </div>
                                        <div class="request-status"></div>
                                    </div>
                                    <div class="request-item">
                                        <div class="request-icon"></div>
                                        <div class="request-info">
                                            <div class="request-hash">IPFS GET QmB8tL5wP...</div>
                                            <div class="request-data">2d8a44197ebb55cc9134a76f...</div>
                                        </div>
                                        <div class="request-status"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Step 3: XOR Reconstruction -->
                    <div class="retrieval-step">
                        <div class="step-indicator">
                            <div class="step-number-large">3</div>
                        </div>
                        <div class="step-content">
                            <h4 class="step-title"> XOR De-randomization</h4>
                            <p class="step-description" style="margin-bottom: 1.5rem;">
                                Guided by the descriptor file from Step 1, the client knows exactly which random blocks correspond to the stored block.
                                It performs the same XOR operation in reverse to perfectly recover the original data.
                            </p>
                            <div class="derandomization-visual">
                                <div class="xor-reconstruction">
                                    <div class="reconstruction-row">
                                        <div class="block-container">
                                            <div class="block-mini randomized">
                                                <div class="block-label-mini text-random-data">Anonymized Block</div>
                                                <div class="hex-mini">c618...</div>
                                            </div>
                                        </div>
                                        <div class="xor-symbol-mini"></div>
                                        <div class="block-container">
                                            <div class="block-mini random">
                                                <div class="block-label-mini text-random-data">Random 1</div>
                                                <div class="hex-mini">a3f7...</div>
                                            </div>
                                        </div>
                                        <div class="xor-symbol-mini"></div>
                                        <div class="block-container">
                                            <div class="block-mini random">
                                                <div class="block-label-mini text-random-data">Random 2</div>
                                                <div class="hex-mini">2d8a...</div>
                                            </div>
                                        </div>
                                        <div class="equals-symbol-mini">=</div>
                                        <div class="block-container">
                                            <div class="block-mini original">
                                                <div class="block-label-mini text-original-data">Original Block</div>
                                                <div class="hex-mini">4865...</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Step 4: File Assembly -->
                    <div class="retrieval-step">
                        <div class="step-indicator">
                            <div class="step-number-large">4</div>
                        </div>
                        <div class="step-content">
                            <h4 class="step-title"> File Assembly</h4>
                            <p class="step-description" style="margin-bottom: 1.5rem;">
                                Recovered blocks are concatenated in order to rebuild the original file. 
                                Hash verification ensures perfect reconstruction.
                            </p>
                            <div class="assembly-visual">
                                <div class="file-blocks">
                                    <div class="block-row">
                                        <div class="file-block-mini recovered">Block 1</div>
                                        <div class="file-block-mini recovered">Block 2</div>
                                        <div class="file-block-mini recovered">Block 3</div>
                                        <div class="file-block-mini recovered">Block 4</div>
                                        <div class="file-block-mini recovered">Block 5</div>
                                    </div>
                                    <div class="block-row">
                                        <div class="file-block-mini recovered">Block 6</div>
                                        <div class="file-block-mini recovered">Block 7</div>
                                        <div class="file-block-mini recovered">Block 8</div>
                                        <div class="file-block-mini recovered">Block 9</div>
                                        <div class="file-block-mini recovered">Block 10</div>
                                    </div>
                                </div>
                                <div class="assembly-arrow"></div>
                                <div class="final-file">
                                    <div class="file-preview">
                                        <div class="file-icon-large"></div>
                                        <div class="file-details">
                                            <div class="final-filename">vacation_photos.zip</div>
                                            <div class="final-size">2.5 MB</div>
                                            <div class="integrity-check"> Integrity verified</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="key-insights">
                    <h4 class="insights-title"> Key Security Properties</h4>
                    <div class="insights-grid">
                        <div class="insight-item">
                            <div class="insight-icon"></div>
                            <div class="insight-text">
                                <strong>Network Observers:</strong> Only see random data transfers, 
                                cannot determine what files are being accessed
                            </div>
                        </div>
                        <div class="insight-item">
                            <div class="insight-icon"></div>
                            <div class="insight-text">
                                <strong>Node Operators:</strong> Store random blocks with no knowledge 
                                of original content or file relationships
                            </div>
                        </div>
                        <div class="insight-item">
                            <div class="insight-icon"></div>
                            <div class="insight-text">
                                <strong>Perfect Recovery:</strong> XOR operations ensure bit-perfect 
                                reconstruction without any data loss
                            </div>
                        </div>
                        <div class="insight-item">
                            <div class="insight-icon"></div>
                            <div class="insight-text">
                                <strong>Descriptor Security:</strong> Only the descriptor holder can 
                                reconstruct files, providing access control
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section class="section">
        <div class="container">
            <div class="section-header">
                <h2>System Properties</h2>
                <p>The unique advantages of combining data anonymization with distributed storage</p>
            </div>

            <div class="properties-grid">
                <div class="property-card">
                    <div class="property-icon"></div>
                    <h3 class="property-title">Data Anonymity</h3>
                    <p class="property-description">
                        Files are never stored or transmitted in their original form. 
                        All network traffic consists of indistinguishable random blocks.
                    </p>
                </div>

                <div class="property-card">
                    <div class="property-icon"></div>
                    <h3 class="property-title">Deniability</h3>
                    <p class="property-description">
                        Random blocks are reused across multiple files. 
                        A single block could be part of any file, making attribution impossible.
                    </p>
                </div>

                <div class="property-card">
                    <div class="property-icon"></div>
                    <h3 class="property-title">Efficiency</h3>
                    <p class="property-description">
                        No onion routing required. With block reuse, storage overhead approaches 
                        ~50% compared to 500-1400% in traditional anonymous networks.
                    </p>
                </div>

                <div class="property-card">
                    <div class="property-icon"></div>
                    <h3 class="property-title">Decentralization</h3>
                    <p class="property-description">
                        IPFS ensures global availability and redundancy. 
                        No central servers or single points of failure.
                    </p>
                </div>

                <div class="property-card">
                    <div class="property-icon"></div>
                    <h3 class="property-title">Block Reuse</h3>
                    <p class="property-description">
                        Random blocks are shared across the network, reducing storage 
                        requirements and improving download speeds over time.
                    </p>
                </div>

                <div class="property-card">
                    <div class="property-icon"></div>
                    <h3 class="property-title">Legal Protection</h3>
                    <p class="property-description">
                        Individual blocks contain only mathematical numbers that cannot 
                        be copyrighted, providing strong legal defensibility.
                    </p>
                </div>
            </div>

            <div class="efficiency-demo" style="margin-top: 80px;">
                <h3 class="demo-title" style="font-size: 1.5rem; font-weight: 600; text-align: center; color: var(--text-primary); margin-bottom: 3rem;">Storage Efficiency Analysis</h3>
                
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 2rem; align-items: start;">
                    <!-- Scenario: With Block Reuse -->
                    <div class="scenario-card" style="height: 100%;">
                        <div style="text-align: center; margin-bottom: 1.5rem;">
                            <div style="font-size: 1.2rem; font-weight: 700; color: var(--text-primary);">With Block Reuse</div>
                            <div style="font-size: 0.9rem; color: var(--text-secondary);">Typical Real-World Scenario</div>
                        </div>
                        
                        <div style="text-align: center;">
                            <div style="margin-bottom: 1rem;">
                                <div style="font-size: 0.8rem; text-transform: uppercase; color: var(--text-muted); margin-bottom: 0.5rem;">Original File (8 Blocks)</div>
                                <div style="display: flex; justify-content: center; gap: 5px;">
                                    <div class="storage-block" style="background: #3b82f620; border: 1px solid #3b82f680; color: #3b82f6;"></div>
                                    <div class="storage-block" style="background: #3b82f620; border: 1px solid #3b82f680; color: #3b82f6;"></div>
                                    <div class="storage-block" style="background: #3b82f620; border: 1px solid #3b82f680; color: #3b82f6;"></div>
                                    <div class="storage-block" style="background: #3b82f620; border: 1px solid #3b82f680; color: #3b82f6;"></div>
                                    <div class="storage-block" style="background: #3b82f620; border: 1px solid #3b82f680; color: #3b82f6;"></div>
                                    <div class="storage-block" style="background: #3b82f620; border: 1px solid #3b82f680; color: #3b82f6;"></div>
                                    <div class="storage-block" style="background: #3b82f620; border: 1px solid #3b82f680; color: #3b82f6;"></div>
                                    <div class="storage-block" style="background: #3b82f620; border: 1px solid #3b82f680; color: #3b82f6;"></div>
                                </div>
                            </div>

                            <div style="font-size: 2rem; color: var(--text-muted); margin: 0.5rem 0;"></div>
                            
                            <div>
                                <div style="font-size: 0.8rem; text-transform: uppercase; color: var(--text-muted); margin-bottom: 0.5rem;">Total Network Storage</div>
                                <div style="display: flex; justify-content: center; gap: 5px; flex-wrap: wrap;">
                                    <div class="storage-block" title="Anonymized Block" style="background: #8b5cf620; border: 1px solid #8b5cf680; color: #8b5cf6;"></div>
                                    <div class="storage-block" title="Anonymized Block" style="background: #8b5cf620; border: 1px solid #8b5cf680; color: #8b5cf6;"></div>
                                    <div class="storage-block" title="Anonymized Block" style="background: #8b5cf620; border: 1px solid #8b5cf680; color: #8b5cf6;"></div>
                                    <div class="storage-block" title="Anonymized Block" style="background: #8b5cf620; border: 1px solid #8b5cf680; color: #8b5cf6;"></div>
                                    <div class="storage-block" title="Anonymized Block" style="background: #8b5cf620; border: 1px solid #8b5cf680; color: #8b5cf6;"></div>
                                    <div class="storage-block" title="Anonymized Block" style="background: #8b5cf620; border: 1px solid #8b5cf680; color: #8b5cf6;"></div>
                                    <div class="storage-block" title="Anonymized Block" style="background: #8b5cf620; border: 1px solid #8b5cf680; color: #8b5cf6;"></div>
                                    <div class="storage-block" title="Anonymized Block" style="background: #8b5cf620; border: 1px solid #8b5cf680; color: #8b5cf6;"></div>
                                    <div class="storage-block" title="New Random Block" style="background: #22c55e20; border: 1px solid #22c55e80; color: #22c55e;"></div>
                                    <div class="storage-block" title="New Random Block" style="background: #22c55e20; border: 1px solid #22c55e80; color: #22c55e;"></div>
                                    <div class="storage-block" title="Reused Random Block" style="background: #f59e0b20; border: 1px solid #f59e0b80; color: #f59e0b; opacity: 0.6;"></div>
                                    <div class="storage-block" title="Reused Random Block" style="background: #f59e0b20; border: 1px solid #f59e0b80; color: #f59e0b; opacity: 0.6;"></div>
                                </div>
                                <div style="font-size: 0.8rem; color: var(--text-muted); margin-top: 0.5rem;">8 Anonymized + 2 New Random + 2 Reused = 12 total blocks</div>
                            </div>
                        </div>

                        <div style="display: flex; justify-content: space-around; margin-top: 1.5rem; padding-top: 1.5rem; border-top: 1px solid var(--border-color);">
                            <div style="text-align: center;">
                                <div style="font-size: 1.5rem; font-weight: 700; color: var(--accent-primary);">12</div>
                                <div style="font-size: 0.8rem; color: var(--text-secondary);">New Blocks</div>
                            </div>
                            <div style="text-align: center;">
                                <div style="font-size: 1.5rem; font-weight: 700; color: #22c55e;">50%</div>
                                <div style="font-size: 0.8rem; color: var(--text-secondary);">Overhead</div>
                            </div>
                        </div>
                    </div>

                    <!-- Comparison Chart -->
                    <div class="card" style="height: 100%;">
                        <h4 class="chart-title" style="text-align: center; font-size: 1.2rem; font-weight: 700; color: var(--text-primary); margin-bottom: 1.5rem;">Overhead Comparison</h4>
                        <div style="display: flex; flex-direction: column; gap: 1rem;">
                            <div class="bar-group">
                                <div style="font-size: 0.85rem; color: var(--text-secondary); margin-bottom: 0.25rem;">Traditional Anonymous Networks</div>
                                <div style="background: var(--bg-secondary); border-radius: 0.25rem; overflow: hidden; border: 1px solid var(--border-color);">
                                    <div style="width: 100%; background: #ef4444; padding: 0.5rem; text-align: right; color: white; font-weight: 600; font-size: 0.8rem;">
                                        500-1400%
                                    </div>
                                </div>
                            </div>
                            <div class="bar-group">
                                <div style="font-size: 0.85rem; color: var(--text-secondary); margin-bottom: 0.25rem;">RandomFS (No Reuse)</div>
                                <div style="background: var(--bg-secondary); border-radius: 0.25rem; overflow: hidden; border: 1px solid var(--border-color);">
                                    <div style="width: 20%; background: #f97316; padding: 0.5rem; text-align: right; color: white; font-weight: 600; font-size: 0.8rem;">
                                        200%
                                    </div>
                                </div>
                            </div>
                            <div class="bar-group">
                                <div style="font-size: 0.85rem; color: var(--text-secondary); margin-bottom: 0.25rem;">RandomFS (75% Reuse)</div>
                                <div style="background: var(--bg-secondary); border-radius: 0.25rem; overflow: hidden; border: 1px solid var(--border-color);">
                                    <div style="width: 5%; background: #22c55e; padding: 0.5rem; text-align: right; color: white; font-weight: 600; font-size: 0.8rem; min-width: fit-content;">
                                        50%
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div style="margin-top: 1.5rem; padding: 1rem; background: var(--bg-secondary); border-radius: 0.5rem; text-align: center;">
                            <p style="font-size: 0.9rem; color: var(--text-secondary); margin: 0;">
                                 <strong>Network Effect:</strong> Efficiency improves as more files are shared and more blocks can be reused.
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <script>
        // Debounce utility for performance on resize
        function debounce(func, wait) {
            let timeout;
            return function executedFunction(...args) {
                const later = () => {
                    clearTimeout(timeout);
                    func(...args);
                };
                clearTimeout(timeout);
                timeout = setTimeout(later, wait);
            };
        }

        // --- Star Color Palettes ---
        const STAR_COLORS_LIGHT = [
            'rgba(59, 130, 246, 0.7)',  // blue
            'rgba(139, 92, 246, 0.6)',  // violet
            'rgba(245, 158, 11, 0.6)',  // amber
            'rgba(34, 197, 94, 0.7)',   // green
            'rgba(236, 72, 153, 0.7)',  // pink
            'rgba(16, 185, 129, 0.7)',  // emerald
        ];
        
        const STAR_COLORS_DARK = [
            'rgba(255, 220, 130, 0.8)', // bright golden
            'rgba(255, 160, 60, 0.7)',  // deep amber
            'rgba(94, 234, 212, 0.7)',  // teal
            'rgba(129, 140, 248, 0.8)', // indigo
            'rgba(244, 114, 182, 0.7)', // rose
            'rgba(250, 204, 21, 0.8)'   // yellow
        ];
        let STAR_COLORS = STAR_COLORS_LIGHT;

        // --- Theme Toggling ---
        const themeToggle = document.getElementById('themeToggle');
        const sunIcon = document.querySelector('.sun-icon');
        const moonIcon = document.querySelector('.moon-icon');
        
        const savedTheme = localStorage.getItem('theme') || 'light';
        document.documentElement.setAttribute('data-theme', savedTheme);
        updateThemeIcon(savedTheme);
        
        themeToggle.addEventListener('click', () => {
            const currentTheme = document.documentElement.getAttribute('data-theme');
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            document.documentElement.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
            updateThemeIcon(newTheme);
            updateStarColors(newTheme);
            // Redraw viz with new colors
            initializeNetworkVisualization();
        });
        
        function updateThemeIcon(theme) {
            if (theme === 'dark') {
                sunIcon.style.display = 'block';
                moonIcon.style.display = 'none';
            } else {
                sunIcon.style.display = 'none';
                moonIcon.style.display = 'block';
            }
        }

        function updateStarColors(theme) {
            STAR_COLORS = theme === 'dark' ? STAR_COLORS_DARK : STAR_COLORS_LIGHT;
        }

        // --- Network Visualization ---
        function initializeNetworkVisualization() {
            const viz = document.querySelector('.network-viz');
            if (!viz) return;

            const centralNode = viz.querySelector('#central-node');
            const peerNodes = Array.from(viz.querySelectorAll('.peer-node'));
            const svg = viz.querySelector('.connections-svg');
            const namespace = "http://www.w3.org/2000/svg";

            // Clear previous lines to prevent duplication on resize
            const oldLines = svg.querySelectorAll('line');
            oldLines.forEach(line => line.remove());

            const vizRect = viz.getBoundingClientRect();
            const centerX = vizRect.width / 2;
            const centerY = vizRect.height / 2;
            const radius = Math.min(centerX, centerY) * 0.75;

            // Position central node
            centralNode.style.left = `${centerX}px`;
            centralNode.style.top = `${centerY}px`;
            centralNode.style.transform = `translate(-50%, -50%)`;
            const centralGlow = centralNode.querySelector('.node-glow');
            const centralIcon = centralNode.querySelector('.node-icon');
            if (centralGlow && centralIcon) {
                const color = STAR_COLORS[0];
                centralGlow.style.backgroundColor = color;
                centralIcon.style.borderColor = color;
            }


            // Position peer nodes and draw connections
            peerNodes.forEach((node, i) => {
                const angle = (i / peerNodes.length) * 2 * Math.PI - (Math.PI / 2);
                const x = centerX + radius * Math.cos(angle);
                const y = centerY + radius * Math.sin(angle);
                node.style.left = `${x}px`;
                node.style.top = `${y}px`;
                node.style.transform = `translate(-50%, -50%)`;

                const line = document.createElementNS(namespace, 'line');
                line.setAttribute('x1', centerX);
                line.setAttribute('y1', centerY);
                line.setAttribute('x2', x);
                line.setAttribute('y2', y);
                line.classList.add('connection-line');
                svg.appendChild(line);

                // Set glow and border color
                const icon = node.querySelector('.node-icon');
                const glow = node.querySelector('.node-glow'); // Sibling for peers
                if (glow && icon) {
                    const color = STAR_COLORS[(i + 1) % STAR_COLORS.length];
                    glow.style.backgroundColor = color;
                    icon.style.borderColor = color;
                }
            });

            // Animate packets
            if (window.packetInterval) clearInterval(window.packetInterval);
            
            window.packetInterval = setInterval(() => {
                // Peer-to-user packet
                if (Math.random() < 0.3) {
                    const startNode = peerNodes[Math.floor(Math.random() * peerNodes.length)];
                    createPacket(startNode, centralNode, svg, 'user-request');
                }

                // Peer-to-peer packet
                const peer1Index = Math.floor(Math.random() * peerNodes.length);
                let peer2Index = Math.floor(Math.random() * peerNodes.length);
                while (peer1Index === peer2Index) {
                    peer2Index = Math.floor(Math.random() * peerNodes.length);
                }
                createPacket(peerNodes[peer1Index], peerNodes[peer2Index], svg, 'peer-to-peer');
            }, 800);
        }

        function createPacket(startNode, endNode, svg, type = 'user-request') {
            const namespace = "http://www.w3.org/2000/svg";
            const packet = document.createElementNS(namespace, 'circle');
            packet.classList.add('data-packet');
            packet.style.fill = STAR_COLORS[Math.floor(Math.random() * STAR_COLORS.length)];
            
            if (type === 'peer-to-peer') {
                packet.classList.add('p2p-packet');
                packet.setAttribute('r', 3.5);
            } else {
                packet.setAttribute('r', 5);
            }

            const startRect = startNode.getBoundingClientRect();
            const endRect = endNode.getBoundingClientRect();
            const svgRect = svg.getBoundingClientRect();

            const startX = startRect.left + startRect.width / 2 - svgRect.left;
            const startY = startRect.top + startRect.height / 2 - svgRect.top;
            const endX = endRect.left + endRect.width / 2 - svgRect.left;
            const endY = endRect.top + endRect.height / 2 - svgRect.top;

            packet.setAttribute('cx', startX);
            packet.setAttribute('cy', startY);
            svg.appendChild(packet);

            const duration = 1500 + Math.random() * 500;
            const startTime = performance.now();

            function animate(currentTime) {
                const elapsedTime = currentTime - startTime;
                const progress = Math.min(elapsedTime / duration, 1);

                packet.setAttribute('cx', startX + (endX - startX) * progress);
                packet.setAttribute('cy', startY + (endY - startY) * progress);

                if (progress < 1) {
                    requestAnimationFrame(animate);
                } else {
                    packet.remove();
                }
            }
            requestAnimationFrame(animate);
        }

        // --- Page Initialization ---
        document.addEventListener('DOMContentLoaded', () => {
            // Animate cards on scroll
            const observerOptions = {
                threshold: 0.1,
                rootMargin: '0px 0px -50px 0px'
            };
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.style.opacity = '1';
                        entry.target.style.transform = 'translateY(0)';
                        observer.unobserve(entry.target);
                    }
                });
            }, observerOptions);

            const cards = document.querySelectorAll('.process-card, .property-card, .benefit-item, .scenario-card, .comparison-card, .step-content');
            cards.forEach(card => {
                card.style.opacity = '0';
                card.style.transform = 'translateY(30px)';
                card.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
                observer.observe(card);
            });

            // Set up visualization
            updateStarColors(savedTheme);
            initializeNetworkVisualization();
            window.addEventListener('resize', debounce(initializeNetworkVisualization, 150));
        });
    </script>
</body>
</html>